/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.5.1/samples
 */

plugins {
    id 'application'
}

application {
    mainClass   = 'test.Main'
}

run {
    standardInput   = System.'in'
}

repositories {
    mavenCentral()
}

dependencies {
    implementation "org.antlr:antlr4:4.13.1"
}

sourceSets.main.java.srcDirs = ['src/main/java']
group   = 'core'
version = '1.0-SNAPSHOT'

tasks.register('Decibel', JavaExec) {
    group = 'application'
    description = 'Runs Decibel class'
    classpath = sourceSets.main.runtimeClasspath
    mainClass.set('test.Decibel')
    args = ['src/main/decibel/test.decibel']
    standardInput   = System.'in'
}

task buildParser(type: JavaExec) {
    group       = "Decibel"
    description = "Generate Java source files from grammar"
    classpath   = sourceSets.main.runtimeClasspath
    mainClass   = 'org.antlr.v4.Tool'
    args        = ['src/main/grammarRules/DecibelParser.g4', '-o', 'src/main/java/grammar', '-package', 'grammar', '-no-listener', '-visitor']
}

task buildLexer(type: JavaExec) {
    group       = "Decibel"
    classpath   = sourceSets.main.runtimeClasspath
    mainClass   = 'org.antlr.v4.Tool'
    args        = ['src/main/grammarRules/DecibelLexer.g4', '-o', 'src/main/java/grammar', '-package', 'grammar', '-no-listener', '-visitor']
}

task testGrammar(type: JavaExec) {
    group       = "Decibel"
    description = "Tests the grammar"
    classpath   = sourceSets.main.runtimeClasspath
    mainClass   = 'org.antlr.v4.gui.TestRig'
    args        = ['grammar.Decibel', 'program', 'src/main/decibel/test.decibel', '-tree', '-tokens']
}
task testGrammarGui(type: JavaExec) {
    group       = "Decibel"
    description = "Tests the grammar"
    classpath   = sourceSets.main.runtimeClasspath
    mainClass   = 'org.antlr.v4.gui.TestRig'
    args        = ['grammar.Decibel', 'program', 'src/main/decibel/test.decibel', '-gui']
}